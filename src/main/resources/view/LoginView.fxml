<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<GridPane xmlns:fx="http://javafx.com/fxml"
          fx:controller="com.smartattendance.controller.LoginController"
          stylesheets="@styles/login.css"
          styleClass="login-root"
          hgap="14" vgap="14" alignment="CENTER">

    <columnConstraints>
        <ColumnConstraints halignment="RIGHT" minWidth="120" hgrow="NEVER"/>
        <ColumnConstraints minWidth="260" hgrow="ALWAYS"/>
    </columnConstraints>

    <children>
        <!-- Title (centered) -->
        <Label text="CS102-Project-Smart Attendance System"
               styleClass="login-title"
               GridPane.rowIndex="0" GridPane.columnIndex="0" GridPane.columnSpan="2"
               GridPane.halignment="CENTER"/>

        <!-- Username (used as Admin username OR Student ID) -->
        <Label text="_Username:" mnemonicParsing="true"
               styleClass="form-label"
               GridPane.rowIndex="1" GridPane.columnIndex="0"/>
        <VBox GridPane.rowIndex="1" GridPane.columnIndex="1" spacing="2" GridPane.hgrow="ALWAYS">
            <TextField fx:id="usernameField"
                       promptText="admin or student ID"
                       styleClass="input"
                       GridPane.hgrow="ALWAYS"/>
            <Label fx:id="usernameError" text=""
                   visible="${usernameError.text != ''}"
                   managed="${usernameError.text != ''}"
                   style="-fx-font-size: 11px; -fx-text-fill: #d32f2f;"/>
        </VBox>

        <!-- Password (admin password OR 'student123' for student flow) -->
        <Label text="_Password:" mnemonicParsing="true"
               styleClass="form-label"
               GridPane.rowIndex="2" GridPane.columnIndex="0"/>
        <VBox GridPane.rowIndex="2" GridPane.columnIndex="1" spacing="2" GridPane.hgrow="ALWAYS">
            <PasswordField fx:id="passwordField"
                           promptText="admin123 or student123"
                           styleClass="input"
                           GridPane.hgrow="ALWAYS"/>
            <Label fx:id="passwordError" text=""
                   visible="${passwordError.text != ''}"
                   managed="${passwordError.text != ''}"
                   style="-fx-font-size: 11px; -fx-text-fill: #d32f2f;"/>
        </VBox>

        <!-- Error banner (auto-hide/show) -->
        <Label fx:id="errorLabel"
               text=""
               styleClass="error-banner"
               wrapText="true"
               maxWidth="360"
               visible="${errorLabel.text != ''}"
               managed="${errorLabel.text != ''}"
               GridPane.rowIndex="3" GridPane.columnIndex="0" GridPane.columnSpan="2"
               GridPane.halignment="CENTER"/>

        <!-- Actions -->
        <HBox spacing="12" alignment="CENTER_RIGHT"
              GridPane.rowIndex="4" GridPane.columnIndex="0" GridPane.columnSpan="2">

            <!-- Forget Password Link Button -->
            <Button fx:id="forgetPasswordButton"
                    text="Forget Password?"
                    onAction="#handleForgetPassword"
                    style="-fx-background-color: transparent; -fx-text-fill: #3b82f6; -fx-font-size: 13px; -fx-cursor: hand; -fx-underline: true;"/>

            <!-- Spacer -->
            <Region HBox.hgrow="ALWAYS"/>

            <!-- Login -->
            <Button fx:id="loginButton"
                    text="Login"
                    onAction="#handleLogin"
                    styleClass="primary-btn"/>
        </HBox>
    </children>
</GridPane>
